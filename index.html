<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DE-TRUSTED ERP | ULTIMATE PAYROLL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&family=Roboto+Mono&display=swap');
        body { font-family: 'Ubuntu', sans-serif; background: #020617; color: #f8fafc; margin: 0; overflow: hidden; }
        .sidebar { background: #0f172a; border-right: 1px solid #1e293b; height: 100vh; width: 260px; position: fixed; }
        .main-content { margin-left: 260px; height: 100vh; overflow-y: auto; padding: 40px; }
        .nav-link { cursor: pointer; padding: 12px 20px; font-size: 11px; font-weight: 700; color: #64748b; border-left: 4px solid transparent; transition: 0.2s; text-transform: uppercase; }
        .nav-link.active { background: #1e293b; border-left: 4px solid #fbbf24; color: white; }
        .glass-card { background: #1e293b; border: 1px solid #334155; border-radius: 12px; padding: 25px; }
        .input-box { background: #020617; border: 1px solid #334155; color: white; padding: 12px; border-radius: 6px; width: 100%; margin-top: 5px; font-size: 16px; font-weight: bold; font-family: 'Roboto Mono', monospace; outline: none; }
        .input-box:focus { border-color: #fbbf24; }
        .btn-gold { background: #fbbf24; color: #020617; font-weight: 900; padding: 14px; border-radius: 6px; width: 100%; cursor: pointer; border: none; text-transform: uppercase; font-size: 12px; transition: 0.3s; }
        .btn-gold:hover { background: #fcd34d; }
        .mono { font-family: 'Roboto Mono', monospace; }
        .toggle-btn { padding: 6px 12px; font-size: 10px; font-weight: 800; border-radius: 4px; cursor: pointer; transition: 0.2s; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
        window.onload = function() {
            const e = React.createElement;
            const { useState } = React;

            const fmt = (num) => new Intl.NumberFormat('en-GH', { minimumFractionDigits: 2, maximumFractionDigits: 2 }).format(num);

            function App() {
                const [user, setUser] = useState({ auth: false, name: '' });
                const [passInput, setPassInput] = useState('');
                const [empName, setEmpName] = useState('');
                const [basicSalary, setBasicSalary] = useState(0);
                const [bonus, setBonus] = useState(0);
                const [isBonusTaxable, setIsBonusTaxable] = useState(true);

                // PAYROLL LOGIC
                const ssnitBase = isBonusTaxable ? (basicSalary + bonus) : basicSalary;
                const ssnit = ssnitBase * 0.055;
                const taxableIncome = ssnitBase - ssnit;

                const calculatePAYE = (income) => {
                    let tax = 0; let rem = income;
                    const bands = [
                        { a: 490, r: 0.00 }, { a: 110, r: 0.05 }, { a: 130, r: 0.10 },
                        { a: 3167, r: 0.175 }, { a: 16103, r: 0.25 }, { a: Infinity, r: 0.30 }
                    ];
                    for (let b of bands) {
                        if (rem <= 0) break;
                        let chunk = Math.min(rem, b.a);
                        tax += chunk * b.r;
                        rem -= chunk;
                    }
                    return tax;
                };

                const payeTax = calculatePAYE(taxableIncome);
                const finalNetPay = (isBonusTaxable) ? (taxableIncome - payeTax) : (basicSalary - (basicSalary * 0.055) - calculatePAYE(basicSalary - (basicSalary * 0.055)) + bonus);

                const handleLogin = (val) => {
                    val.preventDefault();
                    if(passInput === 'SUPER2025') {
                        setUser({ auth: true, name: 'System Director' });
                    } else {
                        alert("ACCESS DENIED: Master Key Incorrect");
                    }
                };

                const generatePDF = () => {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    doc.setFont("helvetica", "bold");
                    doc.text("DE-TRUSTED ENTERPRISE - PAYROLL RECEIPT", 105, 20, null, null, "center");
                    doc.setFontSize(10);
                    doc.text(`Staff: ${empName || 'General Staff'}`, 20, 40);
                    doc.text(`Status: ${isBonusTaxable ? 'Bonus Taxed' : 'Bonus Tax-Free'}`, 20, 47);
                    
                    doc.line(20, 52, 190, 52);
                    doc.text("Description", 20, 60); doc.text("GHS", 170, 60, {align:'right'});
                    doc.setFont("helvetica", "normal");
                    doc.text("Basic Salary", 20, 70); doc.text(fmt(basicSalary), 170, 70, {align:'right'});
                    doc.text(`${isBonusTaxable ? 'Taxable' : 'Tax-Free'} Allowance`, 20, 78); doc.text(fmt(bonus), 170, 78, {align:'right'});
                    
                    doc.text("SSNIT (5.5%)", 20, 95); doc.text(`-${fmt(ssnit)}`, 170, 95, {align:'right'});
                    doc.text("Income Tax (PAYE)", 20, 103); doc.text(`-${fmt(payeTax)}`, 170, 103, {align:'right'});

                    doc.line(130, 115, 190, 115);
                    doc.setFont("helvetica", "bold");
                    doc.text("TOTAL NET PAYABLE", 20, 125); 
                    doc.text(`GHS ${fmt(finalNetPay)}`, 170, 125, {align:'right'});
                    doc.save(`Payslip_${empName}.pdf`);
                };

                if (!user.auth) {
                    return e('div', { className: 'h-screen flex items-center justify-center bg-slate-950' },
                        e('form', { onSubmit: handleLogin, className: 'glass-card w-96 text-center border-slate-800' },
                            e('div', { className: 'mb-8' },
                                e('h1', { className:
